window.Packeta??(window.Packeta={});const{Packeta:e}=window;e.Viewport={element:null,originalValue:null,set:function(){e.Viewport.element||(e.Viewport.element=document.querySelector("meta[name=viewport]"),e.Viewport.element?e.Viewport.originalValue=e.Viewport.element.getAttribute("content"):(e.Viewport.originalValue="user-scalable=yes",e.Viewport.element=document.createElement("meta"),e.Viewport.element.setAttribute("name","viewport"),(document.head||document.getElementsByTagName("head")[0]).appendChild(e.Viewport.element))),e.Viewport.element.setAttribute("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes")},restore:function(){e.Viewport.originalValue!==null&&e.Viewport.element.setAttribute("content",e.Viewport.originalValue)}};e.Widget={baseUrl:"https://widget.packeta.com/",close:function(){},pick:function(u,w,o,l){e.Widget.close(),o===void 0&&(o={}),"version"in o||(o.version=3),o.apiKey=u;var c=e.Widget.baseUrl+"#/?";for(i in o)c+="&"+i+"="+encodeURIComponent(o[i]);var a=typeof l<"u"&&l!==null,n;a?n=l:(e.Viewport.set(),n=document.createElement("div"),n.setAttribute("style","z-index: 999999; position: fixed; -webkit-backface-visibility: hidden; left: 0; top: 0; width: 100%; height: 100%; background: "+(o.overlayColor||"rgba(0, 0, 0, 0.3)")+"; "),n.addEventListener("click",function(){e.Widget.close()}),setTimeout(function(){var r=t.getBoundingClientRect(),d="width"in r?r.width:r.right-r.left;Math.round(d)<window.innerWidth-10&&(t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px")},0)),n.addEventListener("keyup",function(r){r.keyCode==27&&e.Widget.close()});var t=document.createElement("iframe");a?t.setAttribute("style","border: hidden; width: 100%; height: 100%; "):t.setAttribute("style","border: hidden; position: absolute; left: 0; top: 0; width: 100%; height: 100%; padding: 10px 5px; box-sizing: border-box; "),t.setAttribute("id","packeta-widget"),t.setAttribute("sandbox","allow-scripts allow-same-origin"),t.setAttribute("allow","geolocation"),t.setAttribute("src",c),n.appendChild(t),a||document.body.appendChild(n),n.getAttribute("tabindex")===null&&n.setAttribute("tabindex","-1"),n.focus();var s=function(r){try{var d=JSON.parse(r.data);if(!d.packetaWidgetMessage)return}catch{return}e.Widget.close(d.packetaPoint)};window.addEventListener("message",s),e.Widget.close=function(r){if(window.removeEventListener("message",s),a)try{t.parentNode.removeChild(t)}catch{}else document.body.removeChild(n),e.Viewport.restore();w(r||null),e.Widget.close=function(){}}}};
