import{z as o,M as a,u as j,a as b,F as S,b as E,s as N,j as e,c as R,P as k,d as p,B as F,X as I,C as P,L as z,e as y,f as D,g as L,h as q}from"./index-LnQetCf-.js";const v=o.object({new_password:o.string({required_error:a.FIELD_REQUIRED}),confirmed_new_password:o.string({required_error:a.FIELD_REQUIRED}),token:o.string({required_error:a.FIELD_REQUIRED})}).strict().superRefine((s,t)=>{s.new_password!==s.confirmed_new_password&&t.addIssue({code:o.ZodIssueCode.custom,message:a.PASSWORDS_MUST_MATCH})}),A=()=>{var m,u,w;const{t:s}=j(),{token:t}=b({from:S.id}),l=E({resolver:N(v),defaultValues:{new_password:"",confirmed_new_password:"",token:t}}),{register:d,formState:r,handleSubmit:g,setError:f}=l,h=async({confirmed_new_password:C,..._})=>{var x;try{await y.profile.finalizePasswordReset(_)}catch(i){if(D.isAxiosError(i))throw(x=i.response)!=null&&x.status?f("token",{message:"Your token seems expired..."}):L({id:"reset-password-finalization-notification",color:"red",title:"An error happened",message:"An error happened during request. Please try again..."}),i}},c=(m=r.errors.token)==null?void 0:m.message,n=!!c;return e.jsx(R,{...l,children:e.jsx("div",{className:"flex min-h-screen w-full",children:e.jsxs("div",{className:"m-auto w-full max-w-lg",children:[e.jsx("h1",{className:"mb-1 ml-5 text-2xl font-semibold",children:s("Welcome!")}),e.jsx("p",{className:"ml-5 mb-7 font-semibold text-blue-400",children:"You are so close to completing registration! Please enter your desired password and continue."}),e.jsx("form",{onSubmit:g(h),children:e.jsx(k,{shadow:"xl",p:"md",withBorder:!0,className:"w-full",children:!r.isSubmitSuccessful&&!n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-5",children:[e.jsx(p,{label:s("Your new password"),className:"w-full",error:s(((u=r.errors.new_password)==null?void 0:u.message)||""),...d("new_password")}),e.jsx(p,{label:s("Your new password again"),className:"w-full",error:s(((w=r.errors.confirmed_new_password)==null?void 0:w.message)||""),...d("confirmed_new_password")})]}),e.jsx(F,{loading:r.isSubmitting,type:"submit",color:"green",size:"md",className:"mt-7",children:s(r.isSubmitting?"Working...":"Send")})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center",children:[n?e.jsx(I,{className:"mx-auto aspect-square w-16 text-red-400"}):e.jsx(P,{className:"mx-auto aspect-square w-16 text-green-400"}),e.jsx("p",{className:"mt-3 text-xl",children:s(n?c:"We are done here! You can login and start working.")}),e.jsx(z,{to:"/login",className:"mt-5 block font-semibold text-blue-400 hover:underline",children:s("Login to my account")})]})})})})]})})})},Y=q("/finalize-registration/")({component:()=>e.jsx(A,{})});export{Y as Route};
