import{r as n,u as x,j as e,a7 as v,M as c,a9 as b,A as j,ad as C,g,b as w,ae as E,af as y,e as L,o as f,B as N,L as T,ag as I,c as P,ah as S,ai as R,P as k}from"./index-SAZ6haNj.js";function _({timeout:l=2e3}={}){const[s,t]=n.useState(null),[a,o]=n.useState(!1),[r,i]=n.useState(null),u=p=>{window.clearTimeout(r),i(window.setTimeout(()=>o(!1),l)),o(p)};return{copy:p=>{"clipboard"in navigator?navigator.clipboard.writeText(p).then(()=>u(!0)).catch(h=>t(h)):t(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{o(!1),t(null),window.clearTimeout(r)},error:s,copied:a}}function A(){const[l,s]=n.useState(!1),t=n.useRef(null),a=n.useCallback(()=>s(!0),[]),o=n.useCallback(()=>s(!1),[]);return n.useEffect(()=>{if(t.current)return t.current.addEventListener("mouseenter",a),t.current.addEventListener("mouseleave",o),()=>{var r,i;(r=t.current)==null||r.removeEventListener("mouseenter",a),(i=t.current)==null||i.removeEventListener("mouseleave",o)}},[]),{ref:t,hovered:l}}const B=({fileUrl:l})=>{const{hovered:s,ref:t}=A(),a=_(),{t:o}=x(),r=()=>a.copy(l);return e.jsx(v,{label:o(c.FILE_URL),type:"string",className:"w-full",autoComplete:"off",value:l.toString(),rightSection:e.jsx(b,{label:o(a.copied?c.COPY_DONE:c.COPY_TO_CLIPBOARD),position:"top",radius:"xl",transitionProps:{transition:"fade",duration:200},opened:s||a.copied,children:e.jsx(j,{ref:t,onClick:r,color:"blue",variant:"filled",className:"mr-2",children:e.jsx(C,{className:"h-5 w-5"})})}),disabled:!0},"fileUrl")},O=g("/_authorized/files/$fileId/")({component:F});function F(){var d;const l=w(),s=E({from:y.id}),{t}=x(),a=n.useMemo(()=>!!s.id&&L.library.files.getUrl(s.id),[s]),o=n.useMemo(()=>{var m;return(m=s==null?void 0:s.mimeType)==null?void 0:m.startsWith("image/")},[s]),r=s.filepath.split("/").slice(0,-1).join("/"),i=(d=s.filename)==null?void 0:d.split(".").at(-1);let u="/files";return r&&(u+=`?folder=/${r}`),e.jsxs(f,{children:[e.jsx("div",{className:"container mx-auto",children:e.jsx(N,{component:T,to:u,leftSection:e.jsx(I,{}),color:"red",variant:"subtle",className:"-ml-5",children:t(c.GO_BACK)})}),e.jsx(f.Header,{title:e.jsx("span",{className:"text-blue-500",children:s.filename}),classNames:{wrapper:"flex items-center justify-between"}}),e.jsx(f.Content,{children:e.jsx(P,{...l,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-5",children:[e.jsx("div",{className:"flex-none max-w-sm w-full",children:o?e.jsx(S.Wrapper,{size:"md",label:t(c.FILE_PREVIEW),children:e.jsx(R,{quality:80,width:450,imageId:s.id,className:"mb-3 w-full"})}):e.jsxs(k,{className:"aspect-square bg-blue-50 flex items-center justify-center text-4xl",children:[".",i]})}),e.jsx("div",{className:"w-full",children:a?e.jsx(B,{fileUrl:a}):null})]})})})]})}export{O as Route};
