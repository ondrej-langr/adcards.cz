import{r as t,h as m,at as M,u as O,au as D,av as U,c as E,f as K,t as A,ag as F,j as s,aw as B,A as G,K as W,aj as k,ax as q,s as y,o as z,a1 as P,ad as R,ay as Q,az as H,O as J}from"./index-lKkbEZXj.js";const V=(a,x)=>{const r=t.useCallback(()=>m.generalTranslations.getManyForLanguage(a).then(({data:d})=>d.data),[a]),i=t.useMemo(()=>["generalTranslations",a],[a]),n=M(i,r,{enabled:!!a,...x});return t.useMemo(()=>({...n,key:i}),[n,i])},Y=()=>{const{t:a}=O(),x=D(),r=U(),i=E(),{lang:n}=K(),d=A(),[p,{open:T,close:v}]=F(!1),[b,g]=t.useState(!1),{data:l,isLoading:N,refetch:u}=V(n,{refetchOnMount:!p,refetchOnWindowFocus:!p}),[o,f]=t.useState(l),S=t.useMemo(()=>Object.entries(o||{}).sort(([e],[c])=>e.localeCompare(c)),[o]),C=t.useCallback(async(e,c)=>{f({...o||{},[e]:c})},[o]),j=async e=>{(l==null?void 0:l[e])!=o[e]&&(g(!0),await d({title:"Saving",message:a("Saving, please wait..."),successMessage:a("Key translated!")},async()=>{await m.generalTranslations.update(e,o[e],n),await u(),g(!1),v()}))};t.useEffect(()=>{f(l)},[l]),t.useEffect(()=>{u()},[x]);const I=t.useCallback(e=>async()=>{if(confirm(a("Do you really want to delete this key for ALL languages?")))try{d({title:"Deleting",message:a("Deleting selected key, please wait..."),successMessage:a("Key deleted!")},async()=>{await m.generalTranslations.delete(e),await u()})}catch{}},[a,u]),w=s.jsxs("tr",{children:[s.jsx("th",{children:a("Translation key")}),s.jsx("th",{className:"w-full max-w-[350px]",children:a("Translation value")}),s.jsx("th",{className:"w-full max-w-[100px] opacity-0",children:"Tools"})]}),L=S.map(([e,c])=>s.jsxs("tr",{children:[s.jsx("td",{className:"align-top",children:e}),s.jsx("td",{className:"w-full max-w-[350px]",children:s.jsx(B,{onFocus:T,onBlur:()=>j(e),onChange:h=>C(e,h.currentTarget.value),onKeyDown:h=>{h.key==="Enter"&&j(e)},value:c,placeholder:e})}),s.jsx("td",{className:"w-full max-w-[100px]",children:s.jsx(G,{onClick:I(e),color:"red",children:s.jsx(W,{})})})]},e));return s.jsxs(s.Fragment,{children:[s.jsxs(k,{position:"apart",mb:"md",mt:"md",children:[s.jsx(q,{label:"",value:n,disabledOptions:[r==null?void 0:r.i18n.default],onChange:e=>e&&i(y.settings.translations(e).list)}),s.jsx(z,{to:y.settings.translations(n).create,color:"green",leftIcon:s.jsx(P,{}),component:R,children:a("Add new")})]}),s.jsxs("div",{className:"relative min-h-[400px]",children:[s.jsx(Q,{visible:N||b,overlayBlur:2}),s.jsxs(H,{className:"-mx-5",horizontalSpacing:"xl",verticalSpacing:"sm",children:[s.jsx("thead",{children:w}),s.jsx("tbody",{children:L}),s.jsx("tfoot",{children:w})]})]}),s.jsx(J,{})]})};export{Y as GeneralTranslationsSettings,Y as default};
