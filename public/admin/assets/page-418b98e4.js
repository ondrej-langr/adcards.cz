import{e as N,k as b,r as o,Y as T,x as v,c as C,Z as P,j as e,z as R,_ as A,$ as L,a0 as S,a as _}from"./index-c439a344.js";import{T as n}from"./TableView-9bd7f861.js";const q=()=>{const r=N(),{t:i}=b(),[c,u]=o.useState(1),t=T(),l=v("users"),{data:s,isLoading:x,isError:f,refetch:p}=C("users",{params:{page:c}}),d=o.useMemo(()=>{if(!s)return!1;const{data:a,...w}=s;return w},[s]),g=o.useMemo(()=>s!=null&&s.data?s.data.filter(a=>a.id!==(t==null?void 0:t.id)):[],[s,t]),m=t==null?void 0:t.can({action:"update",targetModel:"users"}),j=()=>r("/users/invite"),h=m?a=>r(`/users/${a}`):void 0,E=m?async a=>{confirm(i(S.ON_DELETE_REQUEST_PROMPT))&&(await _.entries.delete("users",a),p())}:void 0,M=o.useMemo(()=>{if(l)return P(l)},[l]);return e.jsx(e.Fragment,{children:e.jsxs(R,{children:[e.jsxs("div",{className:"flex w-full flex-col justify-between gap-5 py-10 md:flex-row",children:[e.jsx("h1",{className:"text-3xl font-semibold capitalize",children:i("Users")}),e.jsx("div",{className:"flex items-center gap-5",children:e.jsxs(A,{color:"green",className:" items-center font-semibold uppercase",size:"md",onClick:j,children:[e.jsx("span",{className:"hidden md:block",children:i("Add new user")}),e.jsx(L,{className:"inline-block h-5 w-5 md:ml-3"})," "]})})]}),e.jsx(n,{isLoading:x||f,items:g,columns:M||[],onEditAction:h,onDeleteAction:E}),e.jsxs(n.Footer,{children:[d&&e.jsx(n.Metadata,{...d}),e.jsx(n.Pagination,{className:"ml-auto",total:(s==null?void 0:s.last_page)||1,page:c,onChange:u})]})]})})};export{q as default};
