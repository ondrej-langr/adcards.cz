import{r as m,u as N,j as t,M as l,ad as O,ae as _,g as P,i as D,b as T,E as j,o as v,c as F,ab as I,af as R,A as M,L as k,ag as G,B as z,O as U,n as A,e as y,ah as B}from"./index-V81NBkkY.js";import{A as H}from"./AvatarSelect-yT2jWG2n.js";import{u as L}from"./NativeScrollArea-3RcdrrPH.js";import{S as J}from"./Select-o2HnkTTJ.js";import{D as W}from"./Divider-uU4n8YgE.js";import"./ImageSelect-MvQnvb4v.js";import"./FileList-rfIhiMB9.js";import"./Modal-ipFB7vwH.js";import"./ItemsMissingMessage-x1wK8Oby.js";import"./Skeleton-2hbUmUW0.js";import"./Overlay-ZRnzj5aG.js";function K(e,a="use-local-storage"){try{return JSON.stringify(e)}catch{throw new Error(`@mantine/hooks ${a}: Failed to serialize the value`)}}function V(e){try{return e&&JSON.parse(e)}catch{return e}}function $(e){return{getItem:s=>{try{return window[e].getItem(s)}catch{return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(s,u)=>{try{window[e].setItem(s,u)}catch{console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:s=>{try{window[e].removeItem(s)}catch{console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function q(e,a){const n=e==="localStorage"?"mantine-local-storage":"mantine-session-storage",{getItem:c,setItem:s,removeItem:u}=$(e);return function({key:r,defaultValue:i,getInitialValueInEffect:h=!0,deserialize:g=V,serialize:E=f=>K(f,a)}){const f=m.useCallback(o=>{let d;try{d=typeof window>"u"||!(e in window)||window[e]===null||!!o}catch{d=!0}if(d)return i;const w=c(r);return w!==null?g(w):i},[r,i]),[p,b]=m.useState(f(h)),x=m.useCallback(o=>{o instanceof Function?b(d=>{const w=o(d);return s(r,E(w)),window.dispatchEvent(new CustomEvent(n,{detail:{key:r,value:o(d)}})),w}):(s(r,E(o)),window.dispatchEvent(new CustomEvent(n,{detail:{key:r,value:o}})),b(o))},[r]),C=m.useCallback(()=>{u(r),window.dispatchEvent(new CustomEvent(n,{detail:{key:r,value:i}}))},[]);return L("storage",o=>{o.storageArea===window[e]&&o.key===r&&b(g(o.newValue??void 0))}),L(n,o=>{o.detail.key===r&&b(o.detail.value)}),m.useEffect(()=>{i!==void 0&&p===void 0&&x(i)},[i,p,x]),m.useEffect(()=>{h&&x(f())},[]),[p===void 0?i:p,x,C]}}function Q(e){return q("localStorage","use-local-storage")(e)}const X=[{value:"en",label:"ðŸ‡¬ðŸ‡§ English"},{value:"cs",label:"ðŸ‡¨ðŸ‡¿ ÄŒesky"},{value:"de",label:"ðŸ‡©ðŸ‡ª German"},{value:"sk",label:"ðŸ‡¸ðŸ‡° Slovensky"}],Y=()=>{const{t:e}=N(),[a,n]=Q({key:O,defaultValue:"en"}),c=s=>{n(s||"en"),_.changeLanguage(s||"en")};return t.jsx(J,{label:e(l.ADMIN_LANGUAGE),placeholder:e(l.SELECT_PLACEHOLDER),data:X,value:a,onChange:c})},de=P("/_authorized/settings/profile/")({component:Z});function Z(){const{user:e}=D(),{t:a}=N(),n=T({defaultValues:e??void 0}),{register:c,handleSubmit:s,watch:u}=n,S=u(),r=m.useMemo(()=>!!Object.keys(j(e,S)).length,[e,S]),i=async h=>{const g=A.show({loading:!0,title:a(l.PLEASE_WAIT),message:a(l.ITEM_UPDATE_WORKING),autoClose:!1}),E=j(e,h);try{await y.profile.update(E),await B(),A.update({id:g,message:a(l.ITEM_UPDATE_DONE),autoClose:2e3,loading:!1})}catch{A.update({id:g,color:"red",message:a(l.ERROR_BASIC),autoClose:2e3,loading:!1})}};return t.jsxs(v,{children:[t.jsx(v.Header,{title:a(l.PROFILE_PAGE_TITLE)}),t.jsx(v.Content,{children:t.jsx(F,{...n,children:t.jsxs("form",{onSubmit:s(i),className:"mt-6 w-full gap-8 pb-5 flex flex-col items-baseline md:flex-row h-full",autoComplete:"off",children:[t.jsx(H,{user:e}),t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"flex gap-4 flex-col w-full",children:[t.jsx(I,{label:a(l.FULL_NAME),className:"w-full",...c("name")}),t.jsx(I,{disabled:!0,label:"Email",className:"w-full",rightSection:t.jsx(R,{label:a(l.CHANGE_PASSWORD),children:t.jsx(M,{component:k,to:"/settings/profile/password/change",className:"w-5 h-5",children:t.jsx(G,{size:17})})}),...c("email")})]}),t.jsx(W,{label:a(l.ADMIN_PANEL),labelPosition:"left",mt:"xl",mb:"sm"}),t.jsx(Y,{}),t.jsx(z,{className:"mt-5 max-w-[150px]",size:"md",color:"green",type:"submit",disabled:!r,loading:n.formState.isSubmitting,children:a(l.SAVE)})]})]})})}),t.jsx(U,{})]})}export{de as Route};
