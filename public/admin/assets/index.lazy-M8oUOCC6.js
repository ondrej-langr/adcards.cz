import{z as o,M as e,u as p,a as I,F as N,b as g,s as h,j as s,c as j,P as b,d as x,B as T,X as A,C as F,L as P,e as D,f as O,n as L,g as G}from"./index-cac_S5g_.js";const k=o.object({new_password:o.string({required_error:e.FIELD_REQUIRED}),confirmed_new_password:o.string({required_error:e.FIELD_REQUIRED}),token:o.string({required_error:e.FIELD_REQUIRED})}).strict().superRefine((r,t)=>{r.new_password!==r.confirmed_new_password&&t.addIssue({code:o.ZodIssueCode.custom,message:e.PASSWORDS_MUST_MATCH})}),C=()=>{var d,_,u;const{t:r}=p(),{token:t}=I({from:N.id}),l=g({resolver:h(k),defaultValues:{new_password:"",confirmed_new_password:"",token:t}}),{register:c,formState:a,handleSubmit:w,setError:R}=l,f=async({confirmed_new_password:U,...S})=>{var E;try{await D.profile.finalizePasswordReset(S)}catch(i){if(O.isAxiosError(i))throw(E=i.response)!=null&&E.status?R("token",{message:e.PASSWORD_RESET_TOKEN_EXPIRED}):L.show({color:"red",title:e.ERROR_BASIC,message:e.ERROR_RETRY}),i}},m=(d=a.errors.token)==null?void 0:d.message,n=!!m;return s.jsx(j,{...l,children:s.jsx("div",{className:"flex min-h-screen w-full",children:s.jsxs("div",{className:"m-auto w-full max-w-lg",children:[s.jsx("h1",{className:"mb-1 ml-5 text-2xl font-semibold",children:r(e.REGISTER_FINALIZE_PAGE_TITLE)}),s.jsx("p",{className:"ml-5 mb-7 font-semibold text-blue-400",children:r(e.REGISTER_FINALIZE_PAGE_SUBTITLE)}),s.jsx("form",{onSubmit:w(f),children:s.jsx(b,{shadow:"xl",p:"md",withBorder:!0,className:"w-full",children:!a.isSubmitSuccessful&&!n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-5",children:[s.jsx(x,{label:r(e.PASSWORD_RESET_INPUT),className:"w-full",error:r(((_=a.errors.new_password)==null?void 0:_.message)||""),...c("new_password")}),s.jsx(x,{label:r(e.PASSWORD_RESET_INPUT_AGAIN),className:"w-full",error:r(((u=a.errors.confirmed_new_password)==null?void 0:u.message)||""),...c("confirmed_new_password")})]}),s.jsx(T,{loading:a.isSubmitting,type:"submit",color:"green",size:"md",className:"mt-7",children:r(a.isSubmitting?e.DOING_WORKING:e.SEND)})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"text-center",children:[n?s.jsx(A,{className:"mx-auto aspect-square w-16 text-red-400"}):s.jsx(F,{className:"mx-auto aspect-square w-16 text-green-400"}),s.jsx("p",{className:"mt-3 text-xl",children:r(n?m:e.REGISTER_FINALIZE_PAGE_DONE)}),s.jsx(P,{to:"/login",className:"mt-5 block font-semibold text-blue-400 hover:underline",children:r(e.LOGIN_TO_MY_ACCOUNT)})]})})})})]})})})},M=G("/finalize-registration/")({component:()=>s.jsx(C,{})});export{M as Route};
