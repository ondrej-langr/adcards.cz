import{R as W,r as I,V as qe,W as Je,Y as er,aR as rr,aQ as tr,bG as ar,bc as Ve,aS as Le,aO as nr,b1 as ir,aD as or,b2 as lr,j as o,u as De,br as Fe,ah as je,P as sr,M as ce,B as ze,w as fe,aN as Ie,L as Ue,x as $e,bH as We,D as ur,bC as cr,H as Ae,A as we,bI as fr,bJ as dr,a4 as vr,T as mr,a0 as gr}from"./index-LnQetCf-.js";import{I as hr}from"./ItemsMissingMessage-PU1TwGDs.js";import{u as Ee}from"./useModelItems-AbJ8PUDc.js";import{m as pe,P as pr}from"./mustache-7WwGepO-.js";import{u as xr}from"./extends-nsRUvlwd.js";import{S as br}from"./Skeleton-_tGmaWaA.js";import{D as re}from"./Drawer-a-Oo-rWY.js";import{C as Sr}from"./FileList-7GbEu98D.js";import{S as Nr}from"./Select-V6q-zMFP.js";import{T as Q}from"./Table-XxGuLzCw.js";function he(e,r,t){return r===void 0&&t===void 0?e:r!==void 0&&t===void 0?Math.max(e,r):Math.min(r===void 0&&t!==void 0?e:Math.max(e,r),t)}function Ke(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}var de;(function(e){e.event="event",e.props="prop"})(de||(de={}));function q(){}function wr(e){var r,t=void 0;return function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return r&&n.length===r.length&&n.every(function(l,s){return l===r[s]})||(r=n,t=e.apply(void 0,n)),t}}function ve(e){return!!(e||"").match(/\d/)}function oe(e){return e==null}function yr(e){return typeof e=="number"&&isNaN(e)}function Ge(e){return oe(e)||yr(e)||typeof e=="number"&&!isFinite(e)}function He(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Vr(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function jr(e,r,t){var n=Vr(t),a=e.search(/[1-9]/);return a=a===-1?e.length:a,e.substring(0,a)+e.substring(a,e.length).replace(n,"$1"+r)}function Cr(e){var r=I.useRef(e);r.current=e;var t=I.useRef(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return r.current.apply(r,n)});return t.current}function Re(e,r){r===void 0&&(r=!0);var t=e[0]==="-",n=t&&r;e=e.replace("-","");var a=e.split("."),l=a[0],s=a[1]||"";return{beforeDecimal:l,afterDecimal:s,hasNegation:t,addNegation:n}}function Dr(e){if(!e)return e;var r=e[0]==="-";r&&(e=e.substring(1,e.length));var t=e.split("."),n=t[0].replace(/^0+/,"")||"0",a=t[1]||"";return(r?"-":"")+n+(a?"."+a:"")}function Ze(e,r,t){for(var n="",a=t?"0":"",l=0;l<=r-1;l++)n+=e[l]||a;return n}function _e(e,r){return Array(r+1).join(e)}function Qe(e){var r=e+"",t=r[0]==="-"?"-":"";t&&(r=r.substring(1));var n=r.split(/[eE]/g),a=n[0],l=n[1];if(l=Number(l),!l)return t+a;a=a.replace(".","");var s=1+l,b=a.length;return s<0?a="0."+_e("0",Math.abs(s))+a:s>=b?a=a+_e("0",s-b):a=(a.substring(0,s)||"0")+"."+a.substring(s),t+a}function ke(e,r,t){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||t)&&r,a=Re(e),l=a.beforeDecimal,s=a.afterDecimal,b=a.hasNegation,w=parseFloat("0."+(s||"0")),y=s.length<=r?"0."+s:w.toFixed(r),f=y.split("."),N=l.split("").reverse().reduce(function(g,h,c){return g.length>c?(Number(g[0])+Number(h)).toString()+g.substring(1,g.length):h+g},f[0]),m=Ze(f[1]||"",r,t),p=b?"-":"",d=n?".":"";return""+p+N+d+m}function te(e,r){if(e.value=e.value,e!==null){if(e.createTextRange){var t=e.createTextRange();return t.move("character",r),t.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(r,r),!0):(e.focus(),!1)}}var Xe=wr(function(e,r){for(var t=0,n=0,a=e.length,l=r.length;e[t]===r[t]&&t<a;)t++;for(;e[a-1-n]===r[l-1-n]&&l-n>t&&a-n>t;)n++;return{from:{start:t,end:a-n},to:{start:t,end:l-n}}});function Ir(e,r,t){return Math.min(Math.max(e,r),t)}function ye(e){return Math.max(e.selectionStart,e.selectionEnd)}function Er(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Rr(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Tr(e){var r=e.currentValue,t=e.formattedValue,n=e.currentValueIndex,a=e.formattedValueIndex;return r[n]===t[a]}function Ar(e,r,t,n,a,l,s){s===void 0&&(s=Tr);var b=a.findIndex(function(F){return F}),w=e.slice(0,b);!r&&!t.startsWith(w)&&(r=w,t=w+t,n=n+w.length);for(var y=t.length,f=e.length,N={},m=new Array(y),p=0;p<y;p++){m[p]=-1;for(var d=0,g=f;d<g;d++){var h=s({currentValue:t,lastValue:r,formattedValue:e,currentValueIndex:p,formattedValueIndex:d});if(h&&N[d]!==!0){m[p]=d,N[d]=!0;break}}}for(var c=n;c<y&&(m[c]===-1||!l(t[c]));)c++;var j=c===y||m[c]===-1?f:m[c];for(c=n-1;c>0&&m[c]===-1;)c--;var R=c===-1||m[c]===-1?0:m[c]+1;return R>j?j:n-R<j-n?R:j}function Me(e,r,t,n){var a=e.length;if(r=Ir(r,0,a),n==="left"){for(;r>=0&&!t[r];)r--;r===-1&&(r=t.indexOf(!0))}else{for(;r<=a&&!t[r];)r++;r>a&&(r=t.lastIndexOf(!0))}return r===-1&&(r=a),r}function _r(e){for(var r=Array.from({length:e.length+1}).map(function(){return!0}),t=0,n=r.length;t<n;t++)r[t]=!!(ve(e[t])||ve(e[t-1]));return r}function Ye(e,r,t,n,a,l){l===void 0&&(l=q);var s=Cr(function(d,g){var h,c;return Ge(d)?(c="",h=""):typeof d=="number"||g?(c=typeof d=="number"?Qe(d):d,h=n(c)):(c=a(d,void 0),h=n(c)),{formattedValue:h,numAsString:c}}),b=I.useState(function(){return s(oe(e)?r:e,t)}),w=b[0],y=b[1],f=function(d,g){d.formattedValue!==w.formattedValue&&y({formattedValue:d.formattedValue,numAsString:d.value}),l(d,g)},N=e,m=t;oe(e)&&(N=w.numAsString,m=!0);var p=s(N,m);return I.useMemo(function(){y(p)},[p.formattedValue]),[w,f]}function kr(e){return e.replace(/[^0-9]/g,"")}function Mr(e){return e}function Or(e){var r=e.type;r===void 0&&(r="text");var t=e.displayType;t===void 0&&(t="input");var n=e.customInput,a=e.renderText,l=e.getInputRef,s=e.format;s===void 0&&(s=Mr);var b=e.removeFormatting;b===void 0&&(b=kr);var w=e.defaultValue,y=e.valueIsNumericString,f=e.onValueChange,N=e.isAllowed,m=e.onChange;m===void 0&&(m=q);var p=e.onKeyDown;p===void 0&&(p=q);var d=e.onMouseUp;d===void 0&&(d=q);var g=e.onFocus;g===void 0&&(g=q);var h=e.onBlur;h===void 0&&(h=q);var c=e.value,j=e.getCaretBoundary;j===void 0&&(j=_r);var R=e.isValidInputCharacter;R===void 0&&(R=ve);var F=e.isCharacterSame,P=Ke(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),U=Ye(c,w,!!y,s,b,f),$=U[0],C=$.formattedValue,M=$.numAsString,G=U[1],z=I.useRef({formattedValue:C,numAsString:M}),H=function(u,v){z.current={formattedValue:u.formattedValue,numAsString:u.value},G(u,v)},K=I.useState(!1),Y=K[0],X=K[1],x=I.useRef(null),S=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return X(!0),function(){clearTimeout(S.current.setCaretTimeout),clearTimeout(S.current.focusTimeout)}},[]);var O=s,E=function(u,v){var i=parseFloat(v);return{formattedValue:u,value:v,floatValue:isNaN(i)?void 0:i}},_=function(u,v,i){u.selectionStart===0&&u.selectionEnd===u.value.length||(te(u,v),S.current.setCaretTimeout=setTimeout(function(){u.value===i&&u.selectionStart!==u.selectionEnd&&te(u,v)},0))},k=function(u,v,i){return Me(u,v,j(u),i)},V=function(u,v,i){var D=j(v),T=Ar(v,C,u,i,D,R,F);return T=Me(v,T,D),T},Z=function(u){var v=u.formattedValue;v===void 0&&(v="");var i=u.input,D=u.setCaretPosition;D===void 0&&(D=!0);var T=u.source,A=u.event,B=u.numAsString,L=u.caretPos;if(i){if(L===void 0&&D){var ue=u.inputValue||i.value,Ne=ye(i);i.value=v,L=V(ue,v,Ne)}i.value=v,D&&L!==void 0&&_(i,L,v)}v!==C&&H(E(v,B),{event:A,source:T})};I.useEffect(function(){var u=z.current,v=u.formattedValue,i=u.numAsString;C!==v&&(C!==M||v!==i)&&H(E(C,M),{event:void 0,source:de.props})},[C,M]);var ae=x.current?ye(x.current):void 0,J=typeof window<"u"?I.useLayoutEffect:I.useEffect;J(function(){var u=x.current;if(C!==z.current.formattedValue&&u){var v=V(z.current.formattedValue,C,ae);u.value=C,_(u,v,C)}},[C]);var ee=function(u,v,i){var D=Xe(C,u),T=Object.assign(Object.assign({},D),{lastValue:C}),A=b(u,T),B=O(A);if(A=b(B,void 0),N&&!N(E(B,A))){var L=v.target,ue=ye(L),Ne=V(u,C,ue);return L.value=C,_(L,Ne,C),!1}return Z({formattedValue:B,numAsString:A,inputValue:u,event:v,source:i,setCaretPosition:!0,input:v.target}),!0},le=function(u){var v=u.target,i=v.value,D=ee(i,u,de.event);D&&m(u)},be=function(u){var v=u.target,i=u.key,D=v.selectionStart,T=v.selectionEnd,A=v.value;A===void 0&&(A="");var B;if(i==="ArrowLeft"||i==="Backspace"?B=Math.max(D-1,0):i==="ArrowRight"?B=Math.min(D+1,A.length):i==="Delete"&&(B=D),B===void 0||D!==T){p(u);return}var L=B;if(i==="ArrowLeft"||i==="ArrowRight"){var ue=i==="ArrowLeft"?"left":"right";L=k(A,B,ue),L!==B&&u.preventDefault()}else i==="Delete"&&!R(A[B])?L=k(A,B,"right"):i==="Backspace"&&!R(A[B])&&(L=k(A,B,"left"));L!==B&&_(v,L,A),u.isUnitTestRun&&_(v,L,A),p(u)},ne=function(u){var v=u.target,i=v.selectionStart,D=v.selectionEnd,T=v.value;if(T===void 0&&(T=""),i===D){var A=k(T,i);A!==i&&_(v,A,T)}d(u)},ie=function(u){u.persist&&u.persist();var v=u.target;x.current=v,S.current.focusTimeout=setTimeout(function(){var i=v.selectionStart,D=v.selectionEnd,T=v.value;T===void 0&&(T="");var A=k(T,i);A!==i&&!(i===0&&D===T.length)&&_(v,A,T),g(u)},0)},Se=function(u){x.current=null,clearTimeout(S.current.focusTimeout),clearTimeout(S.current.setCaretTimeout),h(u)},me=Y&&Er()?"numeric":void 0,se=Object.assign({inputMode:me},P,{type:r,value:C,onChange:le,onKeyDown:be,onMouseUp:ne,onFocus:ie,onBlur:Se});if(t==="text")return a?W.createElement(W.Fragment,null,a(C,P)||null):W.createElement("span",Object.assign({},P,{ref:l}),C);if(n){var ge=n;return W.createElement(ge,Object.assign({},se,{ref:l}))}return W.createElement("input",Object.assign({},se,{ref:l}))}function Oe(e,r){var t=r.decimalScale,n=r.fixedDecimalScale,a=r.prefix;a===void 0&&(a="");var l=r.suffix;l===void 0&&(l="");var s=r.allowNegative,b=r.thousandsGroupStyle;if(b===void 0&&(b="thousand"),e===""||e==="-")return e;var w=xe(r),y=w.thousandSeparator,f=w.decimalSeparator,N=t!==0&&e.indexOf(".")!==-1||t&&n,m=Re(e,s),p=m.beforeDecimal,d=m.afterDecimal,g=m.addNegation;return t!==void 0&&(d=Ze(d,t,!!n)),y&&(p=jr(p,y,b)),a&&(p=a+p),l&&(d=d+l),g&&(p="-"+p),e=p+(N&&f||"")+d,e}function xe(e){var r=e.decimalSeparator;r===void 0&&(r=".");var t=e.thousandSeparator,n=e.allowedDecimalSeparators;return t===!0&&(t=","),n||(n=[r,"."]),{decimalSeparator:r,thousandSeparator:t,allowedDecimalSeparators:n}}function Pr(e,r){e===void 0&&(e="");var t=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),a=t.test(e),l=n.test(e);return e=e.replace(/-/g,""),a&&!l&&r&&(e="-"+e),e}function Br(e,r){return new RegExp("(^-)|[0-9]|"+He(e),r?"g":void 0)}function Lr(e,r,t){return e===""?!0:!(r!=null&&r.match(/\d/))&&!(t!=null&&t.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Fr(e,r,t){var n;r===void 0&&(r=Rr(e));var a=t.allowNegative,l=t.prefix;l===void 0&&(l="");var s=t.suffix;s===void 0&&(s="");var b=t.decimalScale,w=r.from,y=r.to,f=y.start,N=y.end,m=xe(t),p=m.allowedDecimalSeparators,d=m.decimalSeparator,g=e[N]===d;if(ve(e)&&(e===l||e===s)&&r.lastValue==="")return e;if(N-f===1&&p.indexOf(e[f])!==-1){var h=b===0?"":d;e=e.substring(0,f)+h+e.substring(f+1,e.length)}var c=function(S,O,E){var _=!1,k=!1;l.startsWith("-")?_=!1:S.startsWith("--")?(_=!1,k=!0):s.startsWith("-")&&S.length===s.length?_=!1:S[0]==="-"&&(_=!0);var V=_?1:0;return k&&(V=2),V&&(S=S.substring(V),O-=V,E-=V),{value:S,start:O,end:E,hasNegation:_}},j=c(e,f,N),R=j.hasNegation;n=j,e=n.value,f=n.start,N=n.end;var F=c(r.lastValue,w.start,w.end),P=F.start,U=F.end,$=F.value,C=e.substring(f,N);e.length&&$.length&&(P>$.length-s.length||U<l.length)&&!(C&&s.startsWith(C))&&(e=$);var M=0;e.startsWith(l)?M+=l.length:f<l.length&&(M=f),e=e.substring(M),N-=M;var G=e.length,z=e.length-s.length;e.endsWith(s)?G=z:(N>z||N>e.length-s.length)&&(G=N),e=e.substring(0,G),e=Pr(R?"-"+e:e,a),e=(e.match(Br(d,!0))||[]).join("");var H=e.indexOf(d);e=e.replace(new RegExp(He(d),"g"),function(S,O){return O===H?".":""});var K=Re(e,a),Y=K.beforeDecimal,X=K.afterDecimal,x=K.addNegation;return y.end-y.start<w.end-w.start&&Y===""&&g&&!parseFloat(X)&&(e=x?"-":""),e}function zr(e,r){var t=r.prefix;t===void 0&&(t="");var n=r.suffix;n===void 0&&(n="");var a=Array.from({length:e.length+1}).map(function(){return!0}),l=e[0]==="-";a.fill(!1,0,t.length+(l?1:0));var s=e.length;return a.fill(!1,s-n.length+1,s+1),a}function Ur(e){var r=xe(e),t=r.thousandSeparator,n=r.decimalSeparator,a=e.prefix;a===void 0&&(a="");var l=e.allowNegative;if(l===void 0&&(l=!0),t===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+t+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return a.startsWith("-")&&l&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+a+`
      allowNegative: `+l+`
    `),l=!1),Object.assign(Object.assign({},e),{allowNegative:l})}function $r(e){e=Ur(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var r=e.suffix,t=e.allowNegative,n=e.allowLeadingZeros,a=e.onKeyDown;a===void 0&&(a=q);var l=e.onBlur;l===void 0&&(l=q);var s=e.thousandSeparator,b=e.decimalScale,w=e.fixedDecimalScale,y=e.prefix;y===void 0&&(y="");var f=e.defaultValue,N=e.value,m=e.valueIsNumericString,p=e.onValueChange,d=Ke(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),g=xe(e),h=g.decimalSeparator,c=g.allowedDecimalSeparators,j=function(x){return Oe(x,e)},R=function(x,S){return Fr(x,S,e)},F=oe(N)?f:N,P=m??Lr(F,y,r);oe(N)?oe(f)||(P=P||typeof f=="number"):P=P||typeof N=="number";var U=function(x){return Ge(x)?x:(typeof x=="number"&&(x=Qe(x)),P&&typeof b=="number"?ke(x,b,!!w):x)},$=Ye(U(N),U(f),!!P,j,R,p),C=$[0],M=C.numAsString,G=C.formattedValue,z=$[1],H=function(x){var S=x.target,O=x.key,E=S.selectionStart,_=S.selectionEnd,k=S.value;if(k===void 0&&(k=""),E!==_){a(x);return}O==="Backspace"&&k[0]==="-"&&E===y.length+1&&t&&te(S,1),b&&w&&(O==="Backspace"&&k[E-1]===h?(te(S,E-1),x.preventDefault()):O==="Delete"&&k[E]===h&&x.preventDefault()),c!=null&&c.includes(O)&&k[E]===h&&te(S,E+1);var V=s===!0?",":s;O==="Backspace"&&k[E-1]===V&&te(S,E-1),O==="Delete"&&k[E]===V&&te(S,E+1),a(x)},K=function(x){var S=M;if(S.match(/\d/g)||(S=""),n||(S=Dr(S)),w&&b&&(S=ke(S,b,w)),S!==M){var O=Oe(S,e);z({formattedValue:O,value:S,floatValue:parseFloat(S)},{event:x,source:de.event})}l(x)},Y=function(x){return x===h?!0:ve(x)},X=function(x){var S=x.currentValue,O=x.lastValue,E=x.formattedValue,_=x.currentValueIndex,k=x.formattedValueIndex,V=S[_],Z=E[k],ae=Xe(O,S),J=ae.to;return _>=J.start&&_<J.end&&c&&c.includes(V)&&Z===h?!0:V===Z};return Object.assign(Object.assign({},d),{value:G,valueIsNumericString:!1,isValidInputCharacter:Y,isCharacterSame:X,onValueChange:z,format:j,removeFormatting:R,getCaretBoundary:function(x){return zr(x,e)},onKeyDown:H,onBlur:K})}function Wr(e){var r=$r(e);return W.createElement(Or,Object.assign({},r))}function Pe({direction:e,style:r,...t}){return W.createElement("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...r},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},W.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var Ce={root:"m-e2f5cd4e",controls:"m-95e17d22",control:"m-80b4b171"};const Kr=/^-0(\.0*)?$/,Gr=/^-?0\d+$/;function Hr(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Zr({value:e,min:r,step:t=1,allowNegative:n}){const a=e-t;return r!==void 0&&a<r?r:!n&&a<0&&r===void 0?e:(r!==void 0&&r>=0&&a<=r,a)}function Be(e,r,t){if(e===void 0)return!0;const n=r===void 0||e>=r,a=t===void 0||e<=t;return n&&a}const Qr={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,startValue:0},Xr=or((e,{size:r})=>({controls:{"--ni-chevron-size":lr(r,"ni-chevron-size")}})),Te=qe((e,r)=>{const t=Je("NumberInput",Qr,e),{className:n,classNames:a,styles:l,unstyled:s,vars:b,onChange:w,onValueChange:y,value:f,defaultValue:N,max:m,min:p,step:d,hideControls:g,rightSection:h,isAllowed:c,clampBehavior:j,onBlur:R,allowDecimal:F,decimalScale:P,onKeyDown:U,handlersRef:$,startValue:C,disabled:M,rightSectionPointerEvents:G,allowNegative:z,readOnly:H,size:K,rightSectionWidth:Y,stepHoldInterval:X,stepHoldDelay:x,allowLeadingZeros:S,...O}=t,E=er({name:"NumberInput",classes:Ce,props:t,classNames:a,styles:l,unstyled:s,vars:b,varsResolver:Xr}),{resolvedClassNames:_,resolvedStyles:k}=rr({classNames:a,styles:l,props:t}),[V,Z]=tr({value:f,defaultValue:N,onChange:w}),ae=x!==void 0&&X!==void 0,J=I.useRef(null),ee=I.useRef(null),le=I.useRef(0),be=(i,D)=>{D.source==="event"&&Z(Hr(i.floatValue)&&!Kr.test(i.value)&&!(S&&Gr.test(i.value))?i.floatValue:i.value),y==null||y(i,D)},ne=I.useRef();ne.current=()=>{typeof V!="number"||Number.isNaN(V)?Z(he(C,p,m)):Z(m!==void 0?V+d<=m?V+d:m:V+d)};const ie=I.useRef();ie.current=()=>{typeof V!="number"||Number.isNaN(V)?Z(he(C,p,m)):Z(Zr({value:V,min:p,step:d,allowNegative:z}))};const Se=i=>{U==null||U(i),!H&&(i.key==="ArrowUp"&&(i.preventDefault(),ne.current()),i.key==="ArrowDown"&&(i.preventDefault(),ie.current()))};ar($,{increment:ne.current,decrement:ie.current});const me=i=>{i?ne.current():ie.current(),le.current+=1},se=i=>{if(me(i),ae){const D=typeof X=="number"?X:X(le.current);ee.current=window.setTimeout(()=>se(i),D)}},ge=(i,D)=>{var T;i.preventDefault(),(T=J.current)==null||T.focus(),me(D),ae&&(ee.current=window.setTimeout(()=>se(D),x))},u=()=>{ee.current&&window.clearTimeout(ee.current),ee.current=null,le.current=0},v=W.createElement("div",{...E("controls")},W.createElement(Ve,{...E("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof V=="number"&&m!==void 0&&V>=m,mod:{direction:"up"},onMouseDown:i=>i.preventDefault(),onPointerDown:i=>{ge(i,!0)},onPointerUp:u,onPointerLeave:u},W.createElement(Pe,{direction:"up"})),W.createElement(Ve,{...E("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof V=="number"&&p!==void 0&&V<=p,mod:{direction:"down"},onMouseDown:i=>i.preventDefault(),onPointerDown:i=>{ge(i,!1)},onPointerUp:u,onPointerLeave:u},W.createElement(Pe,{direction:"down"})));return W.createElement(Le,{component:Wr,allowNegative:z,className:nr(Ce.root,n),size:K,...O,readOnly:H,disabled:M,value:V,getInputRef:ir(r,J),onValueChange:be,rightSection:g||H?h:h||v,classNames:_,styles:k,unstyled:s,__staticSelector:"NumberInput",decimalScale:F?P:0,onKeyDown:Se,rightSectionPointerEvents:G??(M?"none":void 0),rightSectionWidth:Y??`var(--ni-right-section-width-${K||"sm"})`,allowLeadingZeros:S,onBlur:i=>{R==null||R(i),j==="blur"&&typeof V=="number"&&he(V,p,m)!==V&&Z(he(V,p,m))},isAllowed:i=>j==="strict"?c?c(i)&&Be(i.floatValue,p,m):Be(i.floatValue,p,m):c?c(i):!0})});Te.classes={...Le.classes,...Ce};Te.displayName="@mantine/core/NumberInput";const Yr=({values:e,targetModelTableName:r,labelConstructor:t})=>{const{data:n}=Ee(r,{params:{limit:9999,where:{id:{manipulator:"IN",value:e.map(({id:s})=>s)}}}}),a=I.useMemo(()=>n==null?void 0:n.data.map(s=>({id:s.id,label:pe.render(t,s)})),[n]),l=a==null?void 0:a.map(s=>o.jsxs(Q.Tr,{children:[o.jsx(Q.Td,{children:s.id}),o.jsx(Q.Td,{children:s.label}),o.jsx(Q.Td,{children:o.jsx(Ue,{target:"_blank",to:$e.entryTypes(r).view(s.id),children:o.jsx(Ie,{size:"sm",color:"blue",children:o.jsx(We,{size:15,className:"mr-1 relative top-0.5"})})})})]},s.id));return o.jsxs(Q,{verticalSpacing:"md",horizontalSpacing:"lg",striped:!0,children:[o.jsx(Q.Thead,{children:o.jsxs(Q.Tr,{children:[o.jsx(Q.Th,{className:"w-12",children:"ID"}),o.jsx(Q.Th,{}),o.jsx(Q.Th,{className:"w-12"})]})}),o.jsx(Q.Tbody,{children:l})]})},qr=({title:e,targetModelTableName:r,columnName:t,labelConstructor:n,readonly:a})=>{var d;const[l,{toggle:s}]=xr(),{t:b}=De(),[w,y]=I.useState(1),{data:f}=Ee(r,{params:{page:w}}),{field:N}=Fe({name:t}),m=I.useMemo(()=>{var g;return(g=f==null?void 0:f.data)==null?void 0:g.map(h=>({id:h.id,value:String(h.id),label:pe.render(n,h)}))},[f,b,n]),p=g=>{const h=[...N.value??[]],c=h.findIndex(j=>j.id===g.id);c>-1?h.splice(c,1):h.push({id:g.id}),N.onChange(h)};return o.jsxs(o.Fragment,{children:[o.jsx(je.Wrapper,{size:"md",classNames:{label:"flex w-full items-center"},label:o.jsx(o.Fragment,{children:o.jsx("span",{children:e})}),children:o.jsx(sr,{className:"mt-1",children:(((d=N.value)==null?void 0:d.length)??0)>0?o.jsx(I.Suspense,{fallback:o.jsx(br,{className:"w-full h-24"}),children:o.jsx(Yr,{values:N.value??[],targetModelTableName:r,labelConstructor:n})}):o.jsx(hr,{className:"py-5"})})}),o.jsxs(re.Root,{opened:l,onClose:s,position:"right",offset:8,radius:"md",size:"lg",classNames:{header:"dark:bg-transparent"},children:[o.jsx(re.Overlay,{}),o.jsxs(re.Content,{children:[o.jsxs(re.Header,{children:[o.jsx(re.Title,{children:b(ce.SELECT_EXISTING)}),o.jsx(re.CloseButton,{}),o.jsx(ze,{size:"compact-sm",color:"green",className:"ml-2",onClick:s,children:"OK"})]}),o.jsxs(re.Body,{children:[m==null?void 0:m.map(g=>{var c;const h=!!((c=N.value)!=null&&c.find(j=>j.id===g.id));return o.jsxs("div",{className:"relative",children:[o.jsx(Sr,{classNames:{root:"absolute top-2.5 left-2.5 pointer-none",input:h?"":"bg-transparent dark:bg-gray-50"},checked:h,onChange:()=>p(g),tabIndex:-1,size:"md","aria-label":"Select linked"}),o.jsx(Ve,{className:fe("rounded-prom border-2 w-full pl-12 py-1.5 border-solid dark:border-dashed",h?"border-blue-300 bg-blue-50":"border-gray-100 dark:bg-gray-900 dark:backdrop-blur-lg dark:bg-opacity-65"),onClick:()=>p(g),children:o.jsx(Ie,{className:fe("font-bold text-lg",h?"text-gray-800":"dark:text-white text-gray-800"),children:g.label})})]},g.id)}),o.jsx("div",{className:"flex justify-center my-5",children:o.jsx(pr,{disabled:(f==null?void 0:f.last_page)===1||!(f!=null&&f.last_page),value:w,total:(f==null?void 0:f.last_page)??0,onChange:y})})]})]})]})]})},Jr=({columnName:e,title:r,error:t,targetModelTableName:n,labelConstructor:a,disabled:l})=>{var m,p,d;const{t:s}=De(),{data:b,isError:w,isLoading:y}=Ee(n),{field:f}=Fe({name:e}),N=I.useMemo(()=>{var g;return(g=b==null?void 0:b.data)==null?void 0:g.map(h=>({value:String(h.id),label:pe.render(a,h)}))},[b,s,a]);return o.jsxs("div",{className:"w-full",children:[o.jsx(Nr,{data:N??(f.value?[{value:String((m=f.value)==null?void 0:m.id),label:pe.render(a,f.value)}]:void 0),label:r,value:f.value?String((p=f.value)==null?void 0:p.id):null,onChange:g=>{let h=null;if(g){const c=b==null?void 0:b.data.find(j=>j.id===Number(g));c&&(h={id:c.id})}f.onChange(h)},className:"w-full",placeholder:s("Select an option"),disabled:w||y||l,comboboxProps:{shadow:"xl"},error:t},e),f.value&&!Array.isArray(f.value)?o.jsx(Ue,{target:"_blank",to:$e.entryTypes(n).view((d=f.value)==null?void 0:d.id),children:o.jsxs(Ie,{size:"sm",color:"blue",children:[o.jsx(We,{size:15,className:"mr-1 relative top-0.5"}),ce.SHOW_SELECTED_ITEM]})}):null]})},et=e=>o.jsx("div",{className:"w-full",children:e.multiple?o.jsx(qr,{...e}):o.jsx(Jr,{...e})}),ft=({name:e,label:r,columns:t,placement:n,disabled:a,readonly:l})=>{const{formState:s,register:b}=ur(),{t:w}=De(),y=`${e}.data`,{fields:f,remove:N,move:m,append:p}=cr({name:y}),d=I.useMemo(()=>!!Array.from(t.values()).find(({title:h})=>!!h),[t]),g=I.useMemo(()=>f.length?f:l?[]:[{id:"default"}],[f,l]);return o.jsx(je.Wrapper,{size:"md",classNames:{label:"flex w-full justify-between items-center"},label:o.jsxs(o.Fragment,{children:[o.jsx("span",{children:r}),o.jsx(ze,{size:"compact-sm",color:"green",onClick:()=>p({}),children:w(ce.ADD_ROW)})]}),children:o.jsxs("div",{className:fe(["mt-2 flex flex-col divide-y-2 divide-blue-100",n===Ae.MAIN&&"rounded-lg border border-blue-200 bg-white dark:bg-transparent backdrop-blur-md p-2"]),children:[g.map((h,c)=>o.jsxs("div",{className:fe("flex w-full gap-2 first:pt-0 last:pb-0","py-3"),children:[o.jsxs("div",{className:"flex flex-col w-10 justify-end",children:[o.jsx(we,{size:"sm",disabled:c===0,className:"w-full max-h-[22px] min-h-[22px] rounded-b-none rounded-prom",variant:"white",onClick:()=>m(c,c-1),children:o.jsx(fr,{size:16})}),o.jsx(we,{size:"sm",disabled:g.length-1===c,className:"w-full max-h-[22px] min-h-[22px] rounded-t-none rounded-prom",variant:"white",onClick:()=>m(c,c+1),children:o.jsx(dr,{size:16})})]}),t.map(j=>{var C;let R=o.jsx(o.Fragment,{});const F=`${y}.${c}.${j.name}`,P=w(((C=s.errors[j.name])==null?void 0:C.message)||""),U=j.title||(d?w(`${e} label`):void 0),$=j.title?void 0:{className:"opacity-0"};switch(j.type){case"number":R=o.jsx(gr,{name:F,render:({field:{onChange:M,name:G,onBlur:z,ref:H,value:K}})=>o.jsx(Te,{ref:H,name:G,onBlur:z,onChange:Y=>M(Y),label:U,autoComplete:"off",labelProps:$,error:P,value:K,className:"w-full",disabled:a})});break;case"string":R=o.jsx(vr,{label:U,type:"string",autoComplete:"off",error:P,className:"w-full",labelProps:$,disabled:a,...b(F)});break;case"relationship":R=o.jsx(et,{error:P,disabled:a,admin:{editor:{placement:Ae.MAIN,width:12},isHidden:!1},columnName:F,unique:!1,...j,localized:!1});break}return o.jsx(I.Fragment,{children:R},j.name)}),l?null:o.jsx(je.Wrapper,{label:d?w("Actions"):void 0,labelProps:{className:"opacity-0"},className:"flex-none",children:o.jsx("div",{className:"grid grid-cols-1",children:o.jsx(we,{disabled:c===0||a,className:fe(c==0&&"opacity-0"),p:"xs",size:"xl",variant:"subtle",color:"red",onClick:()=>confirm(w(ce.ON_DELETE_REQUEST_PROMPT))&&N(c),children:o.jsx(mr,{})})})})]},h.id)),g!=null&&g.length?null:o.jsx("p",{children:w(ce.EMPTY_VALUE)})]})})};export{Te as N,ft as R,et as a,he as c};
