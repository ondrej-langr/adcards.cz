import{r as i,u as d,j as t,ab as m,af as f,A as h,ak as b,h as x,al as v,am as C,i as g,e as j,an as y,ao as w,ap as T}from"./index-yOKIGyhs.js";import{D as E}from"./Drawer-N9Gfdqty.js";import{D as k}from"./Divider-dZ2Ci_Vh.js";import"./NativeScrollArea-RnWAygQU.js";import"./Overlay-cDVy-Pzy.js";function L({timeout:e=2e3}={}){const[n,o]=i.useState(null),[s,a]=i.useState(!1),[l,r]=i.useState(null),c=u=>{window.clearTimeout(l),r(window.setTimeout(()=>a(!1),e)),a(u)};return{copy:u=>{"clipboard"in navigator?navigator.clipboard.writeText(u).then(()=>c(!0)).catch(p=>o(p)):o(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{a(!1),o(null),window.clearTimeout(l)},error:n,copied:s}}function N(){const[e,n]=i.useState(!1),o=i.useRef(null),s=i.useCallback(()=>n(!0),[]),a=i.useCallback(()=>n(!1),[]);return i.useEffect(()=>{if(o.current)return o.current.addEventListener("mouseenter",s),o.current.addEventListener("mouseleave",a),()=>{var l,r;(l=o.current)==null||l.removeEventListener("mouseenter",s),(r=o.current)==null||r.removeEventListener("mouseleave",a)}},[]),{ref:o,hovered:e}}const F=({fileUrl:e})=>{const{hovered:n,ref:o}=N(),s=L(),{t:a}=d(),l=()=>s.copy(e);return t.jsx(m,{label:a("File URL"),type:"string",className:"w-full",autoComplete:"off",value:e.pathname,rightSection:t.jsx(f,{label:a(s.copied?"Link copied!":"Copy link to clipboard"),position:"left",radius:"xl",transitionProps:{transition:"fade",duration:200},opened:n||s.copied,children:t.jsx(h,{ref:o,onClick:l,color:"blue",variant:"filled",size:"xl",className:"mr-2",children:t.jsx(b,{className:"h-7 w-7"})})}),disabled:!0},"fileUrl")},A=x("/_authorized/files/$fileId/")({component:I});function I(){const e=v({from:C.id}),{t:n}=d(),o=g(),s=i.useMemo(()=>!!e.id&&j.library.files.getUrl(e.id),[e]),a=i.useMemo(()=>{var r;return(r=e==null?void 0:e.mimeType)==null?void 0:r.startsWith("image/")},[e]),l=()=>{if(!e)return;const r=e.filepath.split("/").slice(0,-1).join("/");let c="/files";r&&(c+=`?folder=/${r}`),o({to:c})};return t.jsx(E,{size:"xl",opened:!0,onClose:l,padding:"xl",position:"right",closeButtonProps:{"aria-label":n("Close")},title:t.jsx(y,{order:4,children:t.jsxs(t.Fragment,{children:["File info of '",t.jsx("span",{className:"text-blue-500",children:e.filename}),"'"]})}),children:s?t.jsxs(t.Fragment,{children:[t.jsx(k,{mb:"lg",mt:"sm",size:"sm"}),a?t.jsx(w.Wrapper,{label:n("File preview"),className:"py-3",labelProps:{className:"font-semibold"},children:t.jsx(T,{quality:80,width:450,imageId:e.id,className:"mb-3 w-full"})}):null,t.jsx(F,{fileUrl:s})]}):null})}export{A as Route};
