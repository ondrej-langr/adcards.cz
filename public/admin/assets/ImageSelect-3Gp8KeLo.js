import{bK as R,bL as be,r as a,bM as S,bN as T,bO as P,bP as A,bQ as ie,R as h,bR as we,bS as Be,bT as z,bU as Ue,ap as _e,bV as N,bW as me,bX as We,bY as he,u as ae,j as d,aW as _,M as W,X as Ge,w as M,B as Ee,ah as qe,ai as Ye,P as ze,be as Xe,aw as Ke}from"./index-SAZ6haNj.js";import{F as Qe}from"./FileList-mh70E_HU.js";function X(e){return typeof window>"u"?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let J=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var G=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(G||{}),xe=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(xe||{}),Je=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Je||{});function Ve(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(J))}var ye=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ye||{});function Ze(e,t=0){var n;return e===((n=X(e))==null?void 0:n.body)?!1:R(t,{0(){return e.matches(J)},1(){let r=e;for(;r!==null;){if(r.matches(J))return!0;r=r.parentElement}return!1}})}function j(e){e==null||e.focus({preventScroll:!0})}let et=["textarea","input"].join(",");function tt(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,et))!=null?n:!1}function nt(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),l=t(r);if(o===null||l===null)return 0;let i=o.compareDocumentPosition(l);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function V(e,t,n=!0){let r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?nt(e):e:Ve(e),l=r.activeElement,i=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),s=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(l))-1;if(t&4)return Math.max(0,o.indexOf(l))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,p;do{if(c>=f||c+f<=0)return 0;let v=s+c;if(t&16)v=(v+f)%f;else{if(v<0)return 3;if(v>=f)return 1}p=o[v],p==null||p.focus(u),c+=i}while(p!==r.activeElement);return t&6&&tt(p)&&p.select(),p.hasAttribute("tabindex")||p.setAttribute("tabindex","0"),2}function Z(e,t,n){let r=be(t);a.useEffect(()=>{function o(l){r.current(l)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[e,n])}function rt(e,t,n=!0){let r=a.useRef(!1);a.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function o(l,i){if(!r.current||l.defaultPrevented)return;let s=function c(f){return typeof f=="function"?c(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e),u=i(l);if(u!==null&&u.ownerDocument.documentElement.contains(u)){for(let c of s){if(c===null)continue;let f=c instanceof HTMLElement?c:c.current;if(f!=null&&f.contains(u))return}return!Ze(u,ye.Loose)&&u.tabIndex!==-1&&l.preventDefault(),t(l,u)}}Z("click",l=>o(l,i=>i.target),!0),Z("blur",l=>o(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ot(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&lt(n)?!1:r}function lt(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}let it="div";var q=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(q||{});let ee=S(function(e,t){let{features:n=1,...r}=e,o={ref:t,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return T({ourProps:o,theirProps:r,slot:{},defaultTag:it,name:"Hidden"})});var Fe=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Fe||{}),te=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(te||{});function at(){let e=a.useRef(0);return Z("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function K(...e){return a.useMemo(()=>X(...e),[...e])}function ue(e,t,n,r){let o=be(n);a.useEffect(()=>{e=e??window;function l(i){o.current(i)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function Se(e,t){let n=a.useRef([]),r=P(e);a.useEffect(()=>{for(let[o,l]of t.entries())if(n.current[o]!==l){let i=r(t);return n.current=t,i}},[r,...t])}let ut="div";var Te=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Te||{});let O=Object.assign(S(function(e,t){let n=a.useRef(null),r=A(n,t),{initialFocus:o,containers:l,features:i=30,...s}=e;ie()||(i=1);let u=K(n);st({ownerDocument:u},!!(i&16));let c=ct({ownerDocument:u,container:n,initialFocus:o},!!(i&2));dt({ownerDocument:u,container:n,containers:l,previousActiveElement:c},!!(i&8));let f=at(),p=P(()=>{let E=n.current;!E||R(f.current,{[te.Forwards]:()=>V(E,G.First),[te.Backwards]:()=>V(E,G.Last)})}),v={ref:r};return h.createElement(h.Fragment,null,!!(i&4)&&h.createElement(ee,{as:"button",type:"button",onFocus:p,features:q.Focusable}),T({ourProps:v,theirProps:s,defaultTag:ut,name:"FocusTrap"}),!!(i&4)&&h.createElement(ee,{as:"button",type:"button",onFocus:p,features:q.Focusable}))}),{features:Te});function st({ownerDocument:e},t){let n=a.useRef(null);ue(e==null?void 0:e.defaultView,"focusout",o=>{!t||n.current||(n.current=o.target)},!0),Se(()=>{t||((e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&j(n.current),n.current=null)},[t]);let r=a.useRef(!1);a.useEffect(()=>(r.current=!1,()=>{r.current=!0,we(()=>{!r.current||(j(n.current),n.current=null)})}),[])}function ct({ownerDocument:e,container:t,initialFocus:n},r){let o=a.useRef(null);return Se(()=>{if(!r)return;let l=t.current;if(!l)return;let i=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===i){o.current=i;return}}else if(l.contains(i)){o.current=i;return}n!=null&&n.current?j(n.current):V(l,G.First)===xe.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),o.current=e==null?void 0:e.activeElement},[r]),o}function dt({ownerDocument:e,container:t,containers:n,previousActiveElement:r},o){let l=Be();ue(e==null?void 0:e.defaultView,"focus",i=>{if(!o||!l.current)return;let s=new Set(n==null?void 0:n.current);s.add(t);let u=r.current;if(!u)return;let c=i.target;c&&c instanceof HTMLElement?ft(s,c)?(r.current=c,j(c)):(i.preventDefault(),i.stopPropagation(),j(u)):j(r.current)},!0)}function ft(e,t){var n;for(let r of e)if((n=r.current)!=null&&n.contains(t))return!0;return!1}let D=new Set,C=new Map;function ve(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function ge(e){let t=C.get(e);!t||(t["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}function pt(e,t=!0){z(()=>{if(!t||!e.current)return;let n=e.current,r=X(n);if(r){D.add(n);for(let o of C.keys())o.contains(n)&&(ge(o),C.delete(o));return r.querySelectorAll("body > *").forEach(o=>{if(o instanceof HTMLElement){for(let l of D)if(o.contains(l))return;D.size===1&&(C.set(o,{"aria-hidden":o.getAttribute("aria-hidden"),inert:o.inert}),ve(o))}}),()=>{if(D.delete(n),D.size>0)r.querySelectorAll("body > *").forEach(o=>{if(o instanceof HTMLElement&&!C.has(o)){for(let l of D)if(o.contains(l))return;C.set(o,{"aria-hidden":o.getAttribute("aria-hidden"),inert:o.inert}),ve(o)}});else for(let o of C.keys())ge(o),C.delete(o)}}},[t])}let $e=a.createContext(!1);function mt(){return a.useContext($e)}function ne(e){return h.createElement($e.Provider,{value:e.force},e.children)}function ht(e){let t=mt(),n=a.useContext(Pe),r=K(e),[o,l]=a.useState(()=>{if(!t&&n!==null||typeof window>"u")return null;let i=r==null?void 0:r.getElementById("headlessui-portal-root");if(i)return i;if(r===null)return null;let s=r.createElement("div");return s.setAttribute("id","headlessui-portal-root"),r.body.appendChild(s)});return a.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),a.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),o}let vt=a.Fragment,gt=S(function(e,t){let n=e,r=a.useRef(null),o=A(Ue(f=>{r.current=f}),t),l=K(r),i=ht(r),[s]=a.useState(()=>{var f;return typeof window>"u"?null:(f=l==null?void 0:l.createElement("div"))!=null?f:null}),u=ie(),c=a.useRef(!1);return z(()=>{if(c.current=!1,!(!i||!s))return i.contains(s)||(s.setAttribute("data-headlessui-portal",""),i.appendChild(s)),()=>{c.current=!0,we(()=>{var f;!c.current||!i||!s||(i.removeChild(s),i.childNodes.length<=0&&((f=i.parentElement)==null||f.removeChild(i)))})}},[i,s]),u?!i||!s?null:_e.createPortal(T({ourProps:{ref:o},theirProps:n,defaultTag:vt,name:"Portal"}),s):null}),bt=a.Fragment,Pe=a.createContext(null),wt=S(function(e,t){let{target:n,...r}=e,o={ref:A(t)};return h.createElement(Pe.Provider,{value:n},T({ourProps:o,theirProps:r,defaultTag:bt,name:"Popover.Group"}))}),re=Object.assign(gt,{Group:wt}),Ae=a.createContext(null);function Ce(){let e=a.useContext(Ae);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ce),t}return e}function Et(){let[e,t]=a.useState([]);return[e.length>0?e.join(" "):void 0,a.useMemo(()=>function(n){let r=P(l=>(t(i=>[...i,l]),()=>t(i=>{let s=i.slice(),u=s.indexOf(l);return u!==-1&&s.splice(u,1),s}))),o=a.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return h.createElement(Ae.Provider,{value:o},n.children)},[t])]}let xt="p",yt=S(function(e,t){let n=Ce(),r=`headlessui-description-${N()}`,o=A(t);z(()=>n.register(r),[r,n.register]);let l=e,i={ref:o,...n.props,id:r};return T({ourProps:i,theirProps:l,slot:n.slot||{},defaultTag:xt,name:n.name||"Description"})}),se=a.createContext(()=>{});se.displayName="StackContext";var oe=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(oe||{});function Ft(){return a.useContext(se)}function St({children:e,onUpdate:t,type:n,element:r}){let o=Ft(),l=P((...i)=>{t==null||t(...i),o(...i)});return z(()=>(l(0,n,r),()=>l(1,n,r)),[l,n,r]),h.createElement(se.Provider,{value:l},e)}var Tt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Tt||{}),$t=(e=>(e[e.SetTitleId=0]="SetTitleId",e))($t||{});let Pt={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Y=a.createContext(null);Y.displayName="DialogContext";function H(e){let t=a.useContext(Y);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,H),n}return t}function At(e,t){return R(t.type,Pt,e,t)}let Ct="div",Dt=me.RenderStrategy|me.Static,Rt=S(function(e,t){let{open:n,onClose:r,initialFocus:o,__demoMode:l=!1,...i}=e,[s,u]=a.useState(0),c=We();n===void 0&&c!==null&&(n=R(c,{[he.Open]:!0,[he.Closed]:!1}));let f=a.useRef(new Set),p=a.useRef(null),v=A(p,t),E=a.useRef(null),b=K(p),$=e.hasOwnProperty("open")||c!==null,k=e.hasOwnProperty("onClose");if(!$&&!k)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!$)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!k)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof n!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n}`);if(typeof r!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${r}`);let w=n?0:1,[y,B]=a.useReducer(At,{titleId:null,descriptionId:null,panelRef:a.createRef()}),x=P(()=>r(!1)),ce=P(g=>B({type:0,id:g})),Q=ie()?l?!1:w===0:!1,U=s>1,de=a.useContext(Y)!==null,De=U?"parent":"leaf";pt(p,U?Q:!1),rt(()=>{var g,F;return[...Array.from((g=b==null?void 0:b.querySelectorAll("body > *, [data-headlessui-portal]"))!=null?g:[]).filter(m=>!(!(m instanceof HTMLElement)||m.contains(E.current)||y.panelRef.current&&m.contains(y.panelRef.current))),(F=y.panelRef.current)!=null?F:p.current]},x,Q&&!U),ue(b==null?void 0:b.defaultView,"keydown",g=>{g.defaultPrevented||g.key===Fe.Escape&&w===0&&(U||(g.preventDefault(),g.stopPropagation(),x()))}),a.useEffect(()=>{var g;if(w!==0||de)return;let F=X(p);if(!F)return;let m=F.documentElement,L=(g=F.defaultView)!=null?g:window,Oe=m.style.overflow,Me=m.style.paddingRight,pe=L.innerWidth-m.clientWidth;if(m.style.overflow="hidden",pe>0){let Ie=m.clientWidth-m.offsetWidth,He=pe-Ie;m.style.paddingRight=`${He}px`}return()=>{m.style.overflow=Oe,m.style.paddingRight=Me}},[w,de]),a.useEffect(()=>{if(w!==0||!p.current)return;let g=new IntersectionObserver(F=>{for(let m of F)m.boundingClientRect.x===0&&m.boundingClientRect.y===0&&m.boundingClientRect.width===0&&m.boundingClientRect.height===0&&x()});return g.observe(p.current),()=>g.disconnect()},[w,p,x]);let[Re,je]=Et(),Ne=`headlessui-dialog-${N()}`,ke=a.useMemo(()=>[{dialogState:w,close:x,setTitleId:ce},y],[w,y,x,ce]),fe=a.useMemo(()=>({open:w===0}),[w]),Le={ref:v,id:Ne,role:"dialog","aria-modal":w===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":Re};return h.createElement(St,{type:"Dialog",element:p,onUpdate:P((g,F,m)=>{F==="Dialog"&&R(g,{[oe.Add](){f.current.add(m),u(L=>L+1)},[oe.Remove](){f.current.add(m),u(L=>L-1)}})})},h.createElement(ne,{force:!0},h.createElement(re,null,h.createElement(Y.Provider,{value:ke},h.createElement(re.Group,{target:p},h.createElement(ne,{force:!1},h.createElement(je,{slot:fe,name:"Dialog.Description"},h.createElement(O,{initialFocus:o,containers:f,features:Q?R(De,{parent:O.features.RestoreFocus,leaf:O.features.All&~O.features.FocusLock}):O.features.None},T({ourProps:Le,theirProps:i,slot:fe,defaultTag:Ct,features:Dt,visible:w===0,name:"Dialog"})))))))),h.createElement(ee,{features:q.Hidden,ref:E}))}),jt="div",Nt=S(function(e,t){let[{dialogState:n,close:r}]=H("Dialog.Overlay"),o=A(t),l=`headlessui-dialog-overlay-${N()}`,i=P(u=>{if(u.target===u.currentTarget){if(ot(u.currentTarget))return u.preventDefault();u.preventDefault(),u.stopPropagation(),r()}}),s=a.useMemo(()=>({open:n===0}),[n]);return T({ourProps:{ref:o,id:l,"aria-hidden":!0,onClick:i},theirProps:e,slot:s,defaultTag:jt,name:"Dialog.Overlay"})}),kt="div",Lt=S(function(e,t){let[{dialogState:n},r]=H("Dialog.Backdrop"),o=A(t),l=`headlessui-dialog-backdrop-${N()}`;a.useEffect(()=>{if(r.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[r.panelRef]);let i=a.useMemo(()=>({open:n===0}),[n]);return h.createElement(ne,{force:!0},h.createElement(re,null,T({ourProps:{ref:o,id:l,"aria-hidden":!0},theirProps:e,slot:i,defaultTag:kt,name:"Dialog.Backdrop"})))}),Ot="div",Mt=S(function(e,t){let[{dialogState:n},r]=H("Dialog.Panel"),o=A(t,r.panelRef),l=`headlessui-dialog-panel-${N()}`,i=a.useMemo(()=>({open:n===0}),[n]),s=P(u=>{u.stopPropagation()});return T({ourProps:{ref:o,id:l,onClick:s},theirProps:e,slot:i,defaultTag:Ot,name:"Dialog.Panel"})}),It="h2",Ht=S(function(e,t){let[{dialogState:n,setTitleId:r}]=H("Dialog.Title"),o=`headlessui-dialog-title-${N()}`,l=A(t);a.useEffect(()=>(r(o),()=>r(null)),[o,r]);let i=a.useMemo(()=>({open:n===0}),[n]);return T({ourProps:{ref:l,id:o},theirProps:e,slot:i,defaultTag:It,name:"Dialog.Title"})}),le=Object.assign(Rt,{Backdrop:Lt,Panel:Mt,Overlay:Nt,Title:Ht,Description:yt});function Bt(e=[!1,!0]){const[[t],n]=a.useReducer((r,o)=>{const l=o instanceof Function?o(r[0]):o,i=Math.abs(r.indexOf(l));return r.slice(i).concat(r.slice(0,i))},e);return[t,n]}function I({isOpen:e,onClose:t,children:n}){const{t:r}=ae();return d.jsx(_.Root,{show:e,as:a.Fragment,children:d.jsxs(le,{as:"div",className:"relative z-10",onClose:t,children:[d.jsx(_.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),d.jsx("div",{className:"fixed inset-0 overflow-hidden",children:d.jsx("div",{className:"absolute inset-0 overflow-hidden",children:d.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:d.jsx(_.Child,{as:a.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:d.jsxs(le.Panel,{className:"pointer-events-auto relative w-screen max-w-6xl",children:[d.jsx(_.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:d.jsx("div",{className:"absolute left-0 top-0 -ml-8 flex pr-2 pt-4 sm:-ml-10 sm:pr-4",children:d.jsxs("button",{type:"button",className:"relative rounded-md text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white bg-transparent",onClick:t,children:[d.jsx("span",{className:"absolute -inset-2.5"}),d.jsx("span",{className:"sr-only",children:r(W.CLOSE)}),d.jsx(Ge,{className:"h-6 w-6","aria-hidden":"true"})]})})}),d.jsx("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:n})]})})})})})]})})}I.Title=function({children:t,classNames:n,outletAfter:r}){return d.jsxs("div",{className:M("px-4 sm:px-6",n==null?void 0:n.root),children:[d.jsx(le.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:t}),r]})};I.Content=function({children:t}){return d.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:t})};const Ut=({onChange:e,value:t,closeOnPick:n,title:r,isOpen:o,onClose:l,fileQueryParameters:i})=>{const{t:s}=ae(),[u,c]=a.useState("/"),f=a.useCallback((p,v)=>{let E=null;if(v){const b=t??[];b.find($=>$.id===p.id)?E=b:E=[...b,{id:p.id}]}else{const b=Array.isArray(t)?t==null?void 0:t.filter($=>String($.id)!==String(p.id)):null;E=b!=null&&b.length?b:null}e(E),n&&E&&l()},[e,l,n,t]);return d.jsxs(I,{isOpen:o,onClose:l,children:[d.jsx(I.Title,{classNames:{root:"flex"},outletAfter:d.jsx(Ee,{disabled:!(t!=null&&t.length),onClick:l,color:"green",className:"ml-auto block",children:s(W.CONFIRM_SELECTION)}),children:r}),d.jsx(I.Content,{children:d.jsx(Qe,{currentFolder:u,onFolderChange:c,selectedFileIds:t??[],onToggleSelectedFile:f,fileQueryParameters:i})})]})},Gt=a.forwardRef(function({wrapperClassName:t,label:n,className:r,selected:o,onChange:l,onBlur:i,multiple:s,error:u,classNames:c,imageWrapperProps:f,placeholderElement:p,imageProps:v},E){var B;const[b,$]=Bt(),{t:k}=ae(),w=a.useCallback(x=>{if(s){l(x);return}l((x==null?void 0:x.at(-1))??null),i&&i()},[l,s,i]),y=a.useMemo(()=>(Array.isArray(o)?o:[o]).filter(Boolean),[o]);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:M(t,r),children:d.jsx(qe.Wrapper,{size:"md",label:n,error:u,children:d.jsxs("div",{className:M("flex items-center",c==null?void 0:c.wrapper),children:[d.jsx("div",{className:M(f!=null&&f.disableStyles?"":"relative mr-6 aspect-square w-20 overflow-hidden rounded-lg",c==null?void 0:c.imageWrapper),children:y.length?d.jsx(Ye,{width:(v==null?void 0:v.width)??80,quality:(v==null?void 0:v.quality)??60,imageId:(B=y[0])==null?void 0:B.id,className:"absolute h-full w-full object-contain object-center bg-blue-50 border border-blue-200"}):d.jsx(ze,{className:M(u?"border-red-400":"","aspect-square flex"),children:p??d.jsx(Xe,{size:40,className:"icon icon-tabler icon-tabler-photo m-auto"})})}),d.jsx(Ee,{className:"flex-none",leftSection:d.jsx(Ke,{size:20}),size:"md",onClick:()=>$(),children:k(W.CHANGE_SELECTION)})]})})}),d.jsx(Ut,{isOpen:b,closeOnPick:!s,onChange:w,onClose:()=>$(),value:y,title:k(W.CHOOSE_IMAGE),fileQueryParameters:{where:{mimeType:{manipulator:"LIKE",value:"%image%"}}}})]})});export{Ut as F,Gt as I,Bt as u};
