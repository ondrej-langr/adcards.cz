import{r as i,u as d,j as t,a4 as m,a8 as f,A as h,ad as x,h as b,ae as v,af as g,i as C,e as j,ag as y,ah as w,ai as T}from"./index-UkeQhmow.js";import{D as E}from"./Drawer-dHf26b4o.js";import{D as L}from"./Divider-FzsehbAm.js";import"./NativeScrollArea-beAZtOJ3.js";import"./Overlay-P14s14uU.js";function N({timeout:e=2e3}={}){const[n,s]=i.useState(null),[o,a]=i.useState(!1),[l,r]=i.useState(null),c=u=>{window.clearTimeout(l),r(window.setTimeout(()=>a(!1),e)),a(u)};return{copy:u=>{"clipboard"in navigator?navigator.clipboard.writeText(u).then(()=>c(!0)).catch(p=>s(p)):s(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{a(!1),s(null),window.clearTimeout(l)},error:n,copied:o}}function k(){const[e,n]=i.useState(!1),s=i.useRef(null),o=i.useCallback(()=>n(!0),[]),a=i.useCallback(()=>n(!1),[]);return i.useEffect(()=>{if(s.current)return s.current.addEventListener("mouseenter",o),s.current.addEventListener("mouseleave",a),()=>{var l,r;(l=s.current)==null||l.removeEventListener("mouseenter",o),(r=s.current)==null||r.removeEventListener("mouseleave",a)}},[]),{ref:s,hovered:e}}const F=({fileUrl:e})=>{const{hovered:n,ref:s}=k(),o=N(),{t:a}=d(),l=()=>o.copy(e);return t.jsx(m,{label:a("File URL"),type:"string",className:"w-full",autoComplete:"off",value:e.pathname,rightSection:t.jsx(f,{label:a(o.copied?"Link copied!":"Copy link to clipboard"),position:"left",radius:"xl",transitionProps:{transition:"fade",duration:200},opened:n||o.copied,children:t.jsx(h,{ref:s,onClick:l,color:"blue",variant:"filled",size:"xl",className:"mr-2",children:t.jsx(x,{className:"h-7 w-7"})})}),disabled:!0},"fileUrl")},A=b("/_authorized/files/$fileId/")({component:I});function I(){const e=v({from:g.id}),{t:n}=d(),s=C(),o=i.useMemo(()=>!!e.id&&j.library.files.getUrl(e.id),[e]),a=i.useMemo(()=>{var r;return(r=e==null?void 0:e.mimeType)==null?void 0:r.startsWith("image/")},[e]),l=()=>{if(!e)return;const r=e.filepath.split("/").slice(0,-1).join("/");let c="/files";r&&(c+=`?folder=/${r}`),s({to:c})};return t.jsx(E,{size:"xl",opened:!0,onClose:l,padding:"xl",position:"right",closeButtonProps:{"aria-label":n("Close")},title:t.jsx(y,{order:4,children:t.jsxs(t.Fragment,{children:["File info of '",t.jsx("span",{className:"text-blue-500",children:e.filename}),"'"]})}),children:o?t.jsxs(t.Fragment,{children:[t.jsx(L,{mb:"lg",mt:"sm",size:"sm"}),a?t.jsx(w.Wrapper,{label:n("File preview"),className:"py-3",labelProps:{className:"font-semibold"},children:t.jsx(T,{quality:80,width:450,imageId:e.id,className:"mb-3 w-full"})}):null,t.jsx(F,{fileUrl:o})]}):null})}export{A as Route};
