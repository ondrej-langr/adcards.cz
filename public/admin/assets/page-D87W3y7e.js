import{c as T,u as R,r as n,m as b,a as w,B as r,n as P,j as e,P as A,o as _,U as v,M as C,h as U}from"./index-lKkbEZXj.js";import{f as L,T as o}from"./_utils-0wHRticH.js";const I=()=>{const c=T(),{t:i}=R(),[m,f]=n.useState(1),t=b(),l=w(r.USERS),{data:s,isLoading:x,isError:E,refetch:p}=P(r.USERS,{params:{page:m}}),d=n.useMemo(()=>{if(!s)return!1;const{data:a,...N}=s;return N},[s]),g=n.useMemo(()=>s!=null&&s.data?s.data.filter(a=>a.id!==(t==null?void 0:t.id)):[],[s,t]),u=t==null?void 0:t.can({action:"update",targetEntityTableName:r.USERS}),j=()=>c("/users/invite"),h=u?a=>c(`/users/${a}`):void 0,S=u?async a=>{confirm(i(C.ON_DELETE_REQUEST_PROMPT))&&(await U.users.delete(a),p())}:void 0,M=n.useMemo(()=>{if(l)return L(l)},[l]);return e.jsx(e.Fragment,{children:e.jsxs(A,{children:[e.jsxs("div",{className:"flex w-full flex-col justify-between gap-5 py-10 md:flex-row",children:[e.jsx("h1",{className:"text-3xl font-semibold capitalize",children:i("Users")}),e.jsx("div",{className:"flex items-center gap-5",children:e.jsxs(_,{color:"green",className:" items-center font-semibold uppercase",size:"md",onClick:j,children:[e.jsx("span",{className:"hidden md:block",children:i("Add new user")}),e.jsx(v,{className:"inline-block h-5 w-5 md:ml-3"})," "]})})]}),e.jsx(o,{isLoading:x||E,items:g,columns:M||[],onEditAction:h,onDeleteAction:S}),e.jsxs(o.Footer,{children:[d&&e.jsx(o.Metadata,{...d}),e.jsx(o.Pagination,{className:"ml-auto",total:(s==null?void 0:s.last_page)||1,page:m,onChange:f})]})]})})};export{I as default};
