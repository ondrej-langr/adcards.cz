import{r as i,d as p,u as d,j as s,T as f,e as v,A as x,C as h,f as b,c as g,g as C,h as j,D as L,i as k,k as y,I as N,l as E}from"./index-lKkbEZXj.js";function I(){const[l,t]=i.useState(!1),a=i.useRef(null),e=i.useCallback(()=>t(!0),[]),n=i.useCallback(()=>t(!1),[]);return i.useEffect(()=>{if(a.current)return a.current.addEventListener("mouseenter",e),a.current.addEventListener("mouseleave",n),()=>{var o,c;(o=a.current)==null||o.removeEventListener("mouseenter",e),(c=a.current)==null||c.removeEventListener("mouseleave",n)}},[]),{ref:a,hovered:l}}const w=({fileUrl:l})=>{const{hovered:t,ref:a}=I(),e=p(),{t:n}=d(),o=()=>e.copy(l);return s.jsx(f,{label:n("File URL"),type:"string",className:"w-full",autoComplete:"off",value:l.pathname,rightSection:s.jsx(v,{label:n(e.copied?"Link copied!":"Copy link to clipboard"),position:"left",radius:"xl",transition:"fade",transitionDuration:200,opened:t||e.copied,children:s.jsx(x,{ref:a,onClick:o,color:"blue",variant:"filled",size:"xl",className:"mr-2",children:s.jsx(h,{className:"h-7 w-7"})})}),disabled:!0},"fileUrl")},T=()=>{const{t:l}=d(),{fileId:t}=b(),a=g(),{data:e,isLoading:n}=C(t),o=i.useMemo(()=>!!t&&j.library.files.getUrl(t),[t]),c=i.useMemo(()=>{var r;return(r=e==null?void 0:e.mimeType)==null?void 0:r.startsWith("image/")},[e]),m=()=>{if(!e)return;const r=e.filepath.split("/").slice(0,-1).join("/");let u="/files";r&&(u+=`?folder=/${r}`),a(u)};return s.jsx(L,{size:"xl",opened:!0,onClose:m,padding:"xl",position:"right",closeButtonLabel:l("Close"),title:s.jsx(k,{order:4,children:n?l("Loading, please wait..."):s.jsxs(s.Fragment,{children:["File info of '",s.jsx("span",{className:"text-blue-500",children:e.filename}),"'"]})}),children:!n&&e&&o?s.jsxs(s.Fragment,{children:[s.jsx(y,{mb:"lg",mt:"sm",size:"sm"}),c?s.jsx(N.Wrapper,{label:l("File preview"),className:"py-3",labelProps:{className:"font-semibold"},children:s.jsx(E,{quality:80,width:450,imageId:t,className:"mb-3 w-full"})}):null,s.jsx(w,{fileUrl:o})]}):null})};export{T as default};
